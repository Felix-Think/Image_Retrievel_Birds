{"cmd": "\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\nimport time\nimport requests\nimport os\nfrom bs4 import BeautifulSoup\n\n# Cài đặt Selenium WebDriver\ndriver = webdriver.Chrome()\n\n# URL của trang Flickr\nurl = \"https://www.flickr.com/search/?text=Pavo+cristatus\"\n\n# Điều hướng tới trang Flickr\ndriver.get(url)\n\n# Tạo thư mục lưu ảnh\noutput_dir = \"concong\"\nos.makedirs(output_dir, exist_ok=True)\n\n# Cuộn trang để tải thêm ảnh\nfor _ in range(10):  # Cuộn 10 lần (có thể thay đổi)\n    if len(driver.window_handles) > 0:\n        driver.execute_script(\"window.scrollTo(0, document.body.scrollHeight);\")\n        time.sleep(2)  # Chờ ảnh tải\n    else:\n        print(\"Cửa sổ trình duyệt đã bị đóng.\")\n        break\n\n# Lấy HTML sau khi cuộn trang\npage_source = driver.page_source\n\n# Đóng trình duyệt\ndriver.quit()\n\n# Phân tích HTML của trang web\nsoup = BeautifulSoup(page_source, \"html.parser\")\n\n# Tìm tất cả thẻ ảnh\nimage_tags = soup.find_all(\"img\")\nprint(f\"Tìm thấy {len(image_tags)} ảnh trên trang.\")\n\nmax_images = 150\ndownload_count = 0\n# Tải ảnh về\nfor idx, img_tag in enumerate(image_tags):\n    try:\n        # Lấy URL ảnh từ thuộc tính \"src\"\n        img_url = img_tag.get(\"src\")\n        if not img_url:\n            continue\n\n        # Nếu URL thiếu scheme, thêm \"https:\" vào đầu\n        if img_url.startswith(\"//\"):\n            img_url = \"https:\" + img_url\n\n        # Tải ảnh\n        img_data = requests.get(img_url).content\n        img_name = f\"{download_count}.jpg\"\n        with open(os.path.join(output_dir, img_name), \"wb\") as f:\n            f.write(img_data)\n\n        download_count += 1\n        print(f\"Đã tải {img_name}\")\n        if download_count >= max_images:\n            break\n    except Exception as e:\n        print(f\"Lỗi khi tải ảnh {download_count}: {e}\")\n\nprint(f\"Tải về thành công {download_count} ảnh.\")\n", "outhist_cell": "aWzKlKUqh9", "cmd_opts": " --cell_id=Cx8GVkB8Nd -s", "is_md": 0, "outhist_title": "UQOdGHURWk", "import_complete": 1, "terminal": "kitty"}