{"cmd": "\nimport random\nimport numpy as np\nimport pandas as pd\nfrom sklearn.preprocessing import LabelEncoder, StandardScaler\n#|%%--%%| <wifEmOrQah|xHhRuJe0vY>\n\n# Load data\ndata = pd.read_csv('DATA_BIRDS.csv')\ndata_1 = data.drop(columns=['Tên loài', 'Loại rừng', 'Mùa'])\nprocessing = data_1.copy()\n#|%%--%%| <xHhRuJe0vY|8MYQPXntoD>\n\n# Label encoding for categorical features\nlabel = LabelEncoder()\ncategorical_features = processing.select_dtypes(include=['object']).columns\nfor col in categorical_features:\n    processing[col] = label.fit_transform(processing[col])\n#|%%--%%| <8MYQPXntoD|YVjV5aUQVr>\n\n# Adjust 'Tỷ lệ sinh sản' based on other columns\nprocessing['Tỷ lệ sinh sản'] += data['Di cư'].apply(lambda x: 2 if x == 0 else 0)\nprocessing['Tỷ lệ sinh sản'] -= data['Rủi ro săn mồi'].apply(lambda x: 1 if x == 0 else 0.5 if x == 2 else 0.2)\n#|%%--%%| <YVjV5aUQVr|naGWXtHPhP>\n\n# Calculate composite score\nprocessing['Chỉ số tổ hợp'] = (\n    0.35 * processing['Số lượng'] + \n    0.15 * processing['Diện tích sinh sống (km²)'] + \n    0.25 * processing['Tỷ lệ sinh sản'] + \n    0.15 * processing['Mối đe dọa môi trường'] + \n    0.10 * (100 - processing['Đô thị hóa'])\n)\n#|%%--%%| <naGWXtHPhP|alzPCePfVF>\n\n# Normalize the composite score\nscaler = StandardScaler()\nprocessing['Chỉ số tổ hợp'] = scaler.fit_transform(processing[['Chỉ số tổ hợp']])\n#|%%--%%| <alzPCePfVF|l42iBAPUw7>\n\n# Label assignment function\ndef assign_label(score):\n    if score <= -1:\n        if -0.67777 <= score <= -0.54345:\n            return 'Nguy cơ trung bình'\n        elif -0.72323 <= score < -0.67778:\n            return 'Nguy cơ thấp'\n        elif -0.766 <= score < -0.72324:\n            return 'Nguy cơ cao'\n        else:\n            return random.choice(['Không có nguy cơ', 'Nguy cơ trung bình'])\n    else:\n        if 0.2 <= score < 0.5:\n            return np.random.choice(['Nguy cơ trung bình', 'Nguy cơ thấp'])\n        elif 0.5 <= score < 0.7:\n            return 'Nguy cơ trung bình'\n        elif 0.7 <= score <= 1.1:\n            return 'Nguy cơ cao'\n        elif score >= 1.1:\n            return random.choice(['Nguy cơ thấp', 'Nguy cơ trung bình'])\n        else:\n            return random.choice(['Không có nguy cơ', 'Nguy cơ thấp', 'Nguy cơ cao', 'Nguy cơ trung bình'])\n#|%%--%%| <l42iBAPUw7|jFal521Luk>\n\n# Apply the label assignment function to the composite score\nprocessing['Nguy cơ tuyệt chủng'] = processing['Chỉ số tổ hợp'].apply(assign_label)\n#|%%--%%| <jFal521Luk|9fkgIQodCV>\n\n# Print summary of the labels\nprint(processing['Nguy cơ tuyệt chủng'].value_counts())\n#|%%--%%| <9fkgIQodCV|qzeD7CI4CB>\n\n# Shuffle data if needed and save to file\ndata['Nguy cơ tuyệt chủng'] = processing['Nguy cơ tuyệt chủng']\ndata = data.sample(frac=1).reset_index(drop=True)\ndata.to_csv('DATA_BIRDS_PROCESSED.csv', index=False)\n", "cmd_opts": " -s --md_cell_start=r\\\"\\\"\\\"°°°", "import_complete": 1, "terminal": "kitty"}